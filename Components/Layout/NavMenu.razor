@inject NavigationManager Navigation
@inject UserService UserService

<div class="sidebar @(isCollapsed ? "collapsed" : "expanded")">
    <!-- Top Brand Row -->
    <div class="sidebar-header">
        <div class="brand-section">
            @if (!isCollapsed)
            {
                <span class="navbar-brand">JournalApp</span>
            }
            <button class="toggle-btn" @onclick="ToggleSidebar" title="@(isCollapsed ? "Expand" : "Collapse")">
                <span class="oi @(isCollapsed ? "oi-chevron-right" : "oi-chevron-left")"></span>
            </button>
        </div>
    </div>

    <!-- Navigation Items -->
    <nav class="sidebar-nav">
        <div class="nav-item">
            <NavLink class="nav-link" href="/" Match="NavLinkMatch.All">
                <span class="oi oi-home"></span>
                @if (!isCollapsed)
                {
                    <span class="nav-text">Home</span>
                }
            </NavLink>
        </div>



        <div class="nav-item">
            <NavLink class="nav-link" href="create">
                <span class="oi oi-plus"></span>
                @if (!isCollapsed)
                {
                    <span class="nav-text">New Entry</span>
                }
            </NavLink>
        </div>

        <div class="nav-item">
            <NavLink class="nav-link" href="calendar">
                <span class="oi oi-calendar"></span>
                @if (!isCollapsed)
                {
                    <span class="nav-text">Calendar</span>
                }
            </NavLink>
        </div>



        <div class="nav-item">
            <NavLink class="nav-link" href="analytics">
                <span class="oi oi-graph"></span>
                @if (!isCollapsed)
                {
                    <span class="nav-text">Analytics</span>
                }
            </NavLink>
        </div>

        <div class="nav-item">
            <NavLink class="nav-link" href="export">
                <span class="oi oi-cloud-download"></span>
                @if (!isCollapsed)
                {
                    <span class="nav-text">Export</span>
                }
            </NavLink>
        </div>

        <div class="nav-item">
            <NavLink class="nav-link" href="settings">
                <span class="oi oi-cog"></span>
                @if (!isCollapsed)
                {
                    <span class="nav-text">Settings</span>
                }
            </NavLink>
        </div>

        <div class="nav-item">
            <NavLink class="nav-link" href="management">
                <span class="oi oi-list"></span>
                @if (!isCollapsed)
                {
                    <span class="nav-text">Management</span>
                }
            </NavLink>
        </div>

        <div class="nav-item mt-auto">
            <div class="nav-link" @onclick="Logout" style="cursor: pointer;">
                <span class="oi oi-account-logout"></span>
                @if (!isCollapsed)
                {
                    <span class="nav-text">Logout</span>
                }
            </div>
        </div>
    </nav>
</div>

@code {
    private bool isCollapsed = false;

    private void ToggleSidebar()
    {
        isCollapsed = !isCollapsed;
    }

    private void Logout()
    {
        UserService.Logout();
        Navigation.NavigateTo("/login");
    }
}